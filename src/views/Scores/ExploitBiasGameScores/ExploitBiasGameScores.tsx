import { useTranslation } from 'react-i18next';
import style from './style.module.css';
import Header from '../../../components/Header/Header';
import Footer from '../../../components/Footer/Footer';
import { useAtom } from 'jotai';
import { scoresAtom } from '../../../atoms/state';

type Score = {
    className: string;
    lowScore: number;
    topScore: number;
};

export default function ExploitBiasGameScores() {
    const { t } = useTranslation();
    const [scores] = useAtom<Score[]>(scoresAtom);

    const countScore = (score: Score) => {
        let points = '';
        points = (score.topScore - score.lowScore).toFixed(2);
        return `${points}`;
    };
    return (
        <div className={style.container}>
            <Header title={t('common.title')} />
            <div className={style.innerContainer}>
                <h2>{t('game.own.scoreSummary', 'Pisteet')}</h2>
                <table>
                    <thead>
                        <tr>
                            <th>{t('game.own.className', 'Luokka')}</th>
                            <th>{t('game.own.lowScore', 'Matala Score')}</th>
                            <th>{t('game.own.topScore', 'Korkea Score')}</th>
                            <th>{t('game.own.points', 'Pisteet')}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {scores.map((score, idx) => (
                            <tr key={`${score.className}-${idx}`}>
                                <td>{score.className}</td>
                                <td>{score.lowScore.toFixed(2)}</td>
                                <td>{score.topScore.toFixed(2)}</td>
                                <td>{countScore(score)}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
            <Footer />
        </div>
    );
}
